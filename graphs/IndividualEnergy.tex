\pgfplotsset{width=0.6\linewidth,compat=1.3}
\begin{tikzpicture}
    % Kernel Energy Axis
    \begin{axis}[
        width  = 0.8\linewidth,
        major x tick style = transparent,
        ybar,
        ymin=0, ymax=25,
        bar width=8pt,
        enlarge y limits={upper=0.15},
        legend image code/.code={\draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.3cm,0.1cm);},
        ymajorgrids = false,
        ylabel = {\textbf{Kernel Energy (J) / Total Energy (J)}},
        symbolic x coords={CPU,GPU,FPGA},
        xtick = data,
        nodes near coords,
        nodes near coords style={font=\small, anchor=west,rotate=90,inner xsep=0.9pt,black},
        yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=2,/pgf/number format/fixed zerofill}, % Ensure full numbers are shown
        scaled y ticks = false,
        enlarge x limits=0.30,
        legend cell align=left,
        legend style={at={(0.7,0.78)},
                       anchor=west,legend columns=1, font=\small},
        axis on top,
    ]
        % Total Energy Data Plots
        \addplot[style={blue,fill=blue!60}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 3.52) (GPU, 9.116) (FPGA, 0.14)}; % RGB2GRAY
        \addplot[style={darkcandyapplered,fill=darkcandyapplered}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 7.52) (GPU, 11.7) (FPGA, 0.32)}; % Histogram Equalisation
        \addplot[style={forestgreen,fill=forestgreen}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=15pt}]
            coordinates {(CPU, 2.58) (GPU, 14.3) (FPGA, 0.41)}; % Gaussian Filter (7x7)
        \addplot[style={gray,fill=gray}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=12pt}]
            coordinates {(CPU, 2.41) (GPU, 7.90) (FPGA, 0.53)}; % Resize
        \addplot[style={pastelorange,fill=pastelorange}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=12pt}]
            coordinates {(CPU, 22.43) (GPU, 15.46) (FPGA, 0.68)}; % Resnet50
        \addplot[style={oorange,fill=oorange}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 7.06) (GPU, 3.99) (FPGA, 0.37)}; % MobilnetV2
        \addplot[style={purple,fill=purple}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 17.4) (GPU, 13.50) (FPGA, 0.40)}; % InceptionV3
        \addplot[style={richlavender,fill=richlavender}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=10pt}]
            coordinates {(CPU, 17.30) (GPU, 16.30) (FPGA, 0.82)}; % Histogram Equalisation + ResNet-50
        \addplot[style={teal,fill=teal}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 7.80) (GPU, 4.70) (FPGA, 0.51)}; % Gaussian Filter + MobilnetV2
        
        \addplot[style={ppink,fill=ppink}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=20pt}]
            coordinates {(CPU, 18.33) (GPU, 11.09) (FPGA, 0.45)}; % RGB2Gray + InceptionV3

        \legend{R2G, Hist. Eql., Gaussian, Resize, Resnet50, MobilnetV2, InceptionV3, Hist+Resnet50, Gauss+MobilnetV2, R2G+InceptionV3}
    \end{axis}

    % Kernel Energy Axis
    \begin{axis}[
        width  = 0.8\linewidth,
        major x tick style = transparent,
        ybar,
        ymin=0, ymax=25,
        bar width=8pt,
        enlarge y limits={upper=0.15},
        legend image code/.code={\draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.3cm,0.1cm);},
        ymajorgrids = false,
        ylabel = {\textbf{}},
        axis y line*=right,
        axis x line=none,
        symbolic x coords={CPU,GPU,FPGA},
        xtick = \empty,
        ytick style = {draw=none}, % Hides the y-axis ticks
        yticklabels = {}, % Hides the y-axis labels
        nodes near coords,
        nodes near coords style={font=\small, anchor=west,rotate=90,inner xsep=0.5pt,black,shift={(-2.5pt,0pt)}}, % Adjust shift as needed
        yticklabel style={/pgf/number format/fixed,/pgf/number format/precision=2,/pgf/number format/fixed zerofill}, % Ensure full numbers are shown
        scaled y ticks = false,
        enlarge x limits=0.30,
        legend cell align=left,
        legend style={at={(0.5,1.05)},
                       anchor=west,legend columns=4, font=\small},
    ]
    
        % Kernel Energy Data Plots
        \addplot[style={blue,fill=blue!30},]
            coordinates {(CPU, 0.23) (GPU, 0.36) (FPGA, 0.05)}; % RGB2GRAY
        \addplot[style={darkcandyapplered,fill=darkcandyapplered!30}]
            coordinates {(CPU, 1.04) (GPU, 0.20) (FPGA, 0.087)}; % Histogram Equalisation
        \addplot[style={forestgreen,fill=forestgreen!30}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 1.98) (GPU, 0.52) (FPGA, 0.28)}; % Gaussian Filter (7x7)
        \addplot[style={gray,fill=gray!30}]
            coordinates {(CPU, 0.24) (GPU, 0.14) (FPGA, 0.05)}; % Resize
        \addplot[style={pastelorange,fill=pastelorange!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 2.42) (GPU, 0.31) (FPGA, 0.23)}; % Resnet50
        \addplot[style={oorange,fill=oorange!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 0.96) (GPU, 0.25) (FPGA, 0.18)}; % MobilnetV2
        \addplot[style={purple,fill=purple!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 2.84) (GPU, 0.41) (FPGA, 0.31)}; % InceptionV3
        \addplot[style={richlavender,fill=richlavender!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 2.78) (GPU, 0.33) (FPGA, 0.29)}; % Histogram Equalisation + ResNet-50
        \addplot[style={teal,fill=teal!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 0.98) (GPU, 0.26) (FPGA, 0.19)}; % Gaussian Filter + MobilnetV2
        \addplot[style={ppink,fill=ppink!30},every node near coord/.append style={rotate=0, anchor=west,inner xsep=0pt}]
            coordinates {(CPU, 3.60) (GPU, 0.44) (FPGA, 0.37)}; % RGB2Gray + InceptionV3

        % \legend{R2G Total, Gaussian Total, Box Total, Median Total, Sobel Total, Resize Total, Addition Total, Subtraction Total, Erode Total, Dilate Total, Gamma Total}
        
    \end{axis}
\end{tikzpicture}
