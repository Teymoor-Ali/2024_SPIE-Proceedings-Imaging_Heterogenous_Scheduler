\pgfplotsset{width=0.6\linewidth,compat=1.3}
\begin{tikzpicture}
    % Kernel Time Axis
    \begin{axis}[
        width  = 0.8\linewidth,
        major x tick style = transparent,
        ybar,
        ymin=0, ymax=350,
        bar width=20pt,
        enlarge y limits={upper=0.15},
        legend image code/.code={\draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.3cm,0.1cm);},
        ymajorgrids = false,
        ylabel = {\textbf{Kernel Time (ms) / Total Time (ms)}},
        symbolic x coords={CPU,GPU,FPGA,Heterogeneous},
        xtick = data,
        nodes near coords,
        nodes near coords style={font=\small, anchor=west,rotate=90,inner xsep=0.9pt,black},
        scaled y ticks = false,
        enlarge x limits=0.20,
        legend cell align=left,
        legend style={at={(0.7,0.9)},
                       anchor=west,legend columns=1, font=\small},
        axis on top,
    ]
        % Total Time Data Plots
        \addplot[style={blue,fill=blue!60}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=0.9pt}]
            coordinates {(CPU, 216.16) (GPU, 323.97) (FPGA, 30.72) (Heterogeneous, 253.61)}; % Histogram Equalisation + ResNet-50
        \addplot[style={darkcandyapplered,fill=darkcandyapplered}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=0.9pt}]
            coordinates {(CPU, 97.14) (GPU, 104.30) (FPGA, 18.94) (Heterogeneous, 68.17)}; % Gaussian Filter + MobilnetV2
        \addplot[style={forestgreen,fill=forestgreen}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=0.9pt}]
            coordinates {(CPU, 229.19) (GPU, 221.93) (FPGA, 16.17) (Heterogeneous, 189.22)}; % RGB2Gray + InceptionV3
        \legend{Hist+Resnet50, Gauss+MobilnetV2, R2G+InceptionV3}
    \end{axis}

    % Total Time Axis
    \begin{axis}[
        width  = 0.8\linewidth,
        major x tick style = transparent,
        ybar,
        ymin=0, ymax=350,
        bar width=20pt,
        enlarge y limits={upper=0.15},
        legend image code/.code={\draw[#1, draw=none] (0cm,-0.1cm) rectangle (0.3cm,0.1cm);},
        ymajorgrids = false,
        ylabel = {\textbf{}},
        axis y line*=right,
        axis x line=none,
        symbolic x coords={CPU,GPU,FPGA,Heterogeneous},
        xtick = \empty,
        ytick style = {draw=none}, % Hides the y-axis ticks
        yticklabels = {}, % Hides the y-axis labels
        nodes near coords,
        nodes near coords style={font=\small, anchor=west,rotate=0,inner xsep=0.5pt,black,shift={(-2.5pt,0pt)}}, % Adjust shift as needed
        scaled y ticks = false,
        enlarge x limits=0.20,
        legend cell align=left,
        legend style={at={(0.5,1.05)},
                       anchor=west,legend columns=4, font=\small},
    ]
        % Kernel Time Data Plots
        \addplot[style={blue,fill=blue!30}]
            coordinates {(CPU, 35.01) (GPU, 7.79) (FPGA, 9.13) (Heterogeneous, 7.11)}; % Histogram Equalisation + ResNet-50
        \addplot[style={darkcandyapplered,fill=darkcandyapplered!30}]
            coordinates {(CPU, 12.29) (GPU, 5.83) (FPGA, 7.16) (Heterogeneous, 5.22)}; % Gaussian Filter + MobilnetV2
        \addplot[style={forestgreen,fill=forestgreen!30}, every node near coord/.append style={rotate=0, anchor=west,inner xsep=-5pt}]
            coordinates {(CPU, 44.81) (GPU, 9.59) (FPGA, 13.79) (Heterogeneous, 8.44)}; % RGB2Gray + InceptionV3
        % \legend{Hist+Resnet50, Gauss+MobilnetV2, R2G+InceptionV3}
    \end{axis}
\end{tikzpicture}
